const form = document.querySelector(".search");
const input = document.getElementById("cityInput");

const weatherBox = document.querySelector(".weather");
const tempEl = document.querySelector(".temp");
const cityEl = document.querySelector(".city");
const humidityEl = document.querySelector(".humidity");
const windEl = document.querySelector(".wind");
const weatherIcon = document.querySelector(".weather-icon");

const errorEl = document.querySelector(".error");
const loadingEl = document.querySelector(".loading");

// ðŸ‘‰ Replace with your OpenWeather API key
const API_KEY = "YOUR_API_KEY_HERE";

form.addEventListener("submit", (e) => {
  e.preventDefault();
  const city = input.value.trim();
  if (!city) return;

  getWeather(city);
});

async function getWeather(city) {
  errorEl.classList.add("hidden");
  weatherBox.classList.add("hidden");
  loadingEl.classList.remove("hidden");

  try {
    const res = await fetch(
      `https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric&appid=${API_KEY}`
    );

    if (!res.ok) throw new Error("City not found");

    const data = await res.json();
    updateUI(data);
  } catch (error) {
    errorEl.classList.remove("hidden");
  } finally {
    loadingEl.classList.add("hidden");
  }
}

function updateUI(data) {
  tempEl.textContent = `${Math.round(data.main.temp)}Â°C`;
  cityEl.textContent = data.name;
  humidityEl.textContent = `${data.main.humidity}%`;
  windEl.textContent = `${Math.round(data.wind.speed)} km/h`;

  const condition = data.weather[0].main.toLowerCase();

  if (condition.includes("cloud")) weatherIcon.src = "images/clouds.png";
  else if (condition.includes("rain")) weatherIcon.src = "images/rain.png";
  else if (condition.includes("clear")) weatherIcon.src = "images/clear.png";
  else if (condition.includes("snow")) weatherIcon.src = "images/snow.png";
  else weatherIcon.src = "images/mist.png";

  weatherBox.classList.remove("hidden");
}
